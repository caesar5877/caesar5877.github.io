业务价值：
* 当前 CaaS Mobile UI 在 ID 扫描成功后总是显示 “Remember Me” 页面，无论信任等级（Trust Level）如何。为了优化流程并减少混淆，需要修改逻辑：
* 仅当 Trust Level 为 0 或 1 时显示 “Remember Me” 页面。
* 其他情况下不再显示。

目标：
*  增强 ID Scan 流程，为 Trust Level 0 或 1 的设备添加 “Remember Me” 页面，提升用户体验，减少重复验证步骤。

范围：
* 修改 ID Scan 流程，增加 “Remember Me” 页面。
* 更新后端逻辑以支持该功能。
* 与现有系统集成。
背景：
* Trust Level 0 或 1 表示较低信任，需要额外验证。通过 “Remember Me” 选项，用户可提升设备信任等级，从而减少后续登录验证。

建议下一步：
* 确认 UI 设计稿是否已准备好。
* 与后端团队同步接口变更（Trust Level 校验逻辑）。
* 在 QA 环境中验证不同 Trust Level 下页面显示逻辑。


主要逻辑：
* 仅当设备的 Trust Level = 0 或 1 且 ID Scan 成功后，UI 才返回状态 SUCCESS_DVC_TRUST 并显示 “Remember Me” 页面。

验收标准：
* “Remember Me” 页面仅在 Trust Level 为 0 或 1 时显示。
* 页面包含复选框，允许用户选择启用 “Remember Me”。
* 系统需安全地存储用户选择，并更新设备的 Trust Level。
* 功能必须符合银行的安全与隐私政策。
* 需完成全面的单元测试与集成测试验证。

---

这是 Confluence 页面 “Challenge with DL and DL + Selfie” 的内容，描述了驾驶证与自拍验证（Driver License + Selfie）在 Challenge-as-a-Service (CaaS) 平台中的设计与流程。以下是要点总结：

#### 业务描述（Business Description）：

用户通过扫描驾驶证（DL）或驾驶证+自拍（DL_SELFIE）进行身份验证。
最终验证结果来自 RBAAD，它会根据指标判断扫描是否满足要求，从而决定是否允许交易继续。
DRIVER_LIC_SELFIE 是新的凭证类型，将逐步取代 DRIVER_LIC。
两者不能同时在同一流程或客户端中启用。
####  相关 API 功能：

* Challenge Options API：列出所有身份验证选项（如 DRIVER_LIC 或 DRIVER_LIC_SELFIE）。
生成唯一的事务标识符（transaction id）、令牌（token）和安全标识。
####  UI 行为：
* 用户选择 DRIVER_LIC_SELFIE 后，调用 IDVAAS SDK 进行扫描（包括自拍）。
* 扫描完成后，UI 将结果传递给 IDVAAS。
* UI 每 3 秒轮询 Challenge Status/Polling Service，检查扫描状态。
* 验证完成后，调用 Update Device Trust 更新设备信任等级。

#### 高层设计流程（High-Level Design Flow）：

调用 challengeOptions 获取可用验证方式。
* 用户选择驾驶证或驾驶证+自拍。
* 扫描并提交至 IDVAAS。
* IDVAAS 将验证结果发送至 Kafka。
* Customer Identity Proofing Listener 处理结果并写入 Cassandra。
* RBAAD 根据验证结果判断是否通过。
* Polling Service 轮询状态并返回成功、失败或重新挑战（rechallenge）。
* 成功后更新设备信任（Device Trust）。

#### RBAAD 接口要求：

* tokenIdentifier：必填
* availabilityIndicator：必须为 OK
* Challenge Verify 字段：
* authenticationVerificationStatusCode：AUTH 将 IDVAAS 的 GREEN 转换为 VERIFY_SUCCESS，RED 转换为 VERIFY_FAILURE。
* Reason text and reason code：从 IDVAAS 响应中获取。
* authenticationVerificationFailReasonText：由 AUTH 从 IDVAAS 响应填充。
* authenticationVerificationFailReasonCode：同上（示例：2020101）。
